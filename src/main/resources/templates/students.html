<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Student List</title>
	<link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        table {
            border-collapse: collapse;
            width: 60%;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
	
	<form th:action="@{/logout}" method="post" class="logout-form">
		<button type="submit" class="logout-btn">Logout</button>
	</form>
	<div class="container">
		<h1>Student Management System</h1>
		
	</div>
</body>
<div class="page-header">
			<h2>Student Details</h2>
			<a th:href="@{/students/download}" class="btn csv-btn">
				Download CSV
			</a>
		</div>

<div class="student-actions-left">
	<form th:action="@{/students}" method="get" class="search-form">
	       <input type="text"
	              name="keyword"
	              th:value="${keyword}"
	              placeholder="Search..." />
	       <button type="submit">Search</button>
	   </form>
	   
	   <div class="add-student-wrapper">
	   <a th:href="@{/students/add}" class="btn add-btn">
	           Add Student
	       </a>
</div>

<p th:text="${message}" style="color:red;"></p>

<table>
    <tr>
        <th>ID</th>
		<th>Photo</th>
        <th>First Name</th>
		<th>Last Name</th>
		<th>Phone No</th>
        <th>Email</th>
		<th>Actions</th>
		
    </tr>

    <tr th:each="student : ${students}">
        <td th:text="${student.id}"></td>
		<td>
			<img th:src="@{'/images/' + ${student.photo}}"
			        class="student-photo"
					 alt="Photo">
		   </td>
        <td th:text ="${student.firstName}"></td>
		<td th:text = "${student.lastName}"></td>
		<td th:text = "${student.phoneNo}"></td>
        <td th:text="${student.email}"></td>
	
		<td>

		    <!-- EDIT BUTTON -->
		    <form th:action="@{/students/edit/{id}(id=${student.id})}" 
		          method="get" 
		          style="display:inline;">
		        <button type="submit">Edit</button>
		    </form>

		    <!-- DELETE BUTTON -->
		    <form th:action="@{/students/delete/{id}(id=${student.id})}" 
		          method="get" 
		          style="display:inline;"
		          onsubmit="return confirm('Are you sure you want to delete?');">
		        <button type="submit" class="delete-btn">Delete</button>
		    </form>

		</td>
		
    </tr>
</table>
<br>
<div>
	<!-- Previous Button -->
	<div class="pagination">
	<span th:if="${currentPage > 0}">
		<a th:href="@{/students(page=${currentPage - 1}, keyword=${keyword})}">Previous</a>
	</span>
	<!-- Page Numbers -->
	<span th:each="i : ${#numbers.sequence(0, totalPages -1)}">
		<aa th:href="@{/students(page=${i}, keyword=${keyword})}"
		   th:text="${i+1}"
		   th:style="${i == currentPage} ? 'font-weight:bold' : ''">
		   </a>
	</span>
	
	<!-- Next Button -->
	<span th:if="${currentPage < totalPages - 1}">
		<a th:href="@{/students(page=${currentPage + 1}, keyword=${keyword})}">Next</a>
	</span>
</div>

</div>
</body>
</html>
